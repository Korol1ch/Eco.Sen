<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EcoSen ‚Äî “ö–æ“õ—ã—Å—Ç—ã –∞–Ω—ã“õ—Ç–∞—É (–ú–æ–±–∏–ª—å–Ω–∞—è)</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;700&display=swap" rel="stylesheet"/>

  <style>
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background: #f0f2f5;
      color: #333;
    }

    a { text-decoration: none; }

    .wrapper { display: flex; flex-direction: column; min-height: 100vh; }

    /* ===== –•–µ–¥–µ—Ä ===== */
    .header { width: 100%; padding: 12px 0; display: flex; justify-content: center; background: white; }
    .header-section { width: 95%; display: flex; justify-content: space-between; align-items: center; }
    .logo { font-size: 22px; font-weight: 700; color: #111; cursor: pointer; }
    .menu { display: flex; gap: 12px; }
    .menu-text { font-size: 14px; color: #111; cursor: pointer; }
    .menu-text:hover { color: #2e7d32; }

    /* ===== –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ ===== */
    .section2 { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 15px; }
    .section2-section {
      background: #fff; padding: 20px; border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 95%; text-align: center;
      display: flex; flex-direction: column; gap: 20px;
    }

    .upload-section h1 { font-size: 18px; margin-bottom: 15px; }
    #image-container {
      margin: 0 auto;
      border: 3px solid #ccc;
      border-radius: 10px;
      width: 250px; height: 250px;
      display: flex; align-items: center; justify-content: center;
      background-color: #fafafa; overflow: hidden;
    }
    #uploaded-image { max-width: 100%; max-height: 100%; }

    /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
    .results-section { width: 100%; }
    .results-section h2 { font-size: 16px; color: #2e7d32; margin-bottom: 10px; }
    #label-container { text-align: left; font-size: 14px; }
    .result-item { margin: 10px 0; }
    .result-label { font-weight: 600; font-size: 14px; margin-bottom: 3px; }
    .result-bar { height: 10px; border-radius: 5px; background: #ddd; overflow: hidden; }
    .result-bar-fill { height: 100%; background: linear-gradient(90deg, #4caf50, #81c784); width: 0; transition: width 0.6s ease; }

    .waste-info {
      margin-top: 15px; padding: 12px; border-radius: 10px;
      background: #f1f8e9; box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      border-left: 5px solid #4caf50;
      font-size: 14px;
    }
    .waste-info h3 { margin-bottom: 8px; color: #2e7d32; font-size: 16px; }
    .waste-info p { font-size: 14px; line-height: 1.5; }

    /* –ö–Ω–æ–ø–∫–∞ –∫–∞—Ä—Ç—ã */
    .map-button-container { margin-top: 20px; text-align: center; }
    #open-map {
      padding: 12px 25px; font-size: 15px;
      background: linear-gradient(135deg, #4caf50, #2e7d32);
      color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2); transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    #open-map:hover { transform: translateY(-2px); box-shadow: 0 5px 12px rgba(0,0,0,0.25); }

    /* ===== –§—É—Ç–µ—Ä ===== */
    .footer { background: #222; color: #fff; padding: 20px; text-align: center; font-size: 13px; }
    .footer a { color: #4caf50; margin: 0 6px; }
    .footer a:hover { text-decoration: underline; }

    /* –°–µ–∫—Ü–∏—è —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ */
    .section3 { width: 100%; display: flex; justify-content: center; padding: 10px 0; }
    .section3-section { width: 95%; display: flex; flex-direction: column; gap: 15px; }
    .box { width: 100%; padding: 12px; border-bottom: 1px solid #ccc; display: flex; flex-direction: column; }
    .box img { width: 100%; height: auto; margin-bottom: 8px; }
    .text1 { font-size: 16px; font-weight: 600; margin-bottom: 6px; }
    .text2 { font-size: 14px; line-height: 1.5; color: #333; white-space: pre-wrap; }
  </style>
</head>
<body>

  <div class="wrapper">
    <!-- –•–µ–¥–µ—Ä -->
    <div class="header">
      <div class="header-section">
        <a href="#"><div class="logo">EcoSen</div></a>
        <div class="menu">
          <a href="#"><div class="menu-text">–°“±—Ä—ã–ø—Ç–∞—É</div></a>
          <a href="../index.html"><div class="menu-text">–ö–∞—Ä—Ç–∞</div></a>
        </div>
      </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ -->
    <section class="section2">
      <div class="section2-section">
        <div class="upload-section">
          <h1>–°—É—Ä–µ—Ç—Ç—ñ –∂“Ø–∫—Ç–µ“£—ñ–∑ ‚ôªÔ∏è</h1>
          <div id="image-container"><img id="uploaded-image" src="" alt="–°—É—Ä–µ—Ç" /></div>
          <div class="file-upload">
            <label for="image-upload" class="file-upload-label">–§–∞–π–ª —Ç–∞“£–¥–∞—É</label>
            <input type="file" id="image-upload" accept="image/*">
          </div>
        </div>

        <div class="results-section">
          <h2>–ê–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω –∞“õ–ø–∞—Ä–∞—Ç</h2>
          <div id="label-container">–¢–∞–ª–¥–∞—É “Ø—à—ñ–Ω —Å—É—Ä–µ—Ç—Ç—ñ —Ç–∞“£–¥–∞“£—ã–∑</div>

          <div class="map-button-container">
            <button id="open-map">‚ôªÔ∏è “ö–∞–π –∂–µ—Ä–≥–µ ”©—Ç–∫—ñ–∑—É–≥–µ –±–æ–ª–∞–¥—ã?</button>
          </div>
        </div>
      </div>
    </section>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã -->

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
      <p>¬© 2025 EcoSen. –ë–∞—Ä–ª—ã“õ “õ“±“õ—ã“õ—Ç–∞—Ä “õ–æ—Ä“ì–∞–ª“ì–∞–Ω.</p>
      <p>–ê“õ—Ç–∞—É, “ö–∞–∑–∞“õ—Å—Ç–∞–Ω | info@ecosen.kz | +7 (700) 123-45-67</p>
      <p>–ë—ñ–∑ ”ô–ª–µ—É–º–µ—Ç—Ç—ñ–∫ –∂–µ–ª—ñ–ª–µ—Ä–¥–µ–º—ñ–∑: <a href="#">Instagram</a> | <a href="https://www.youtube.com/@ecosen">YouTube</a></p>
    </footer>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

  <script>
  const URL = "https://teachablemachine.withgoogle.com/models/4cC54KsZN/";
  let model, labelContainer, imageElement;

  const wasteInfo = {
    "–ü–ª–∞—Å—Ç–∏–∫": { title: "‚ôªÔ∏è –ü–ª–∞—Å—Ç–∏–∫", text: "–ü–ª–∞—Å—Ç–∏–∫–∞–ª—ã“õ –±“±–π—ã–º–¥–∞—Ä–¥—ã –∂—É—ã–ø, —Ç“Ø—Ä–ª–µ—Ä—ñ–Ω–µ “õ–∞—Ä–∞–π ”©—Ç–∫—ñ–∑—ñ“£—ñ–∑: PET, HDPE, PP –∂”ô–Ω–µ —Ç.–±." },
    "–ë—É–º–∞–≥–∞": { title: "üìÑ “ö–∞“ì–∞–∑", text: "–¢–∞–∑–∞ “õ–∞“ì–∞–∑–¥—ã –∫—ñ—Ä “õ–∞“ì–∞–∑–¥–∞–Ω –±”©–ª—ñ“£—ñ–∑. –ì–∞–∑–µ—Ç—Ç–µ—Ä, –∫–∞—Ä—Ç–æ–Ω –∂”ô–Ω–µ –∫–µ“£—Å–µ “õ–∞“ì–∞–∑—ã –∂–∞—Ä–∞–º–¥—ã." },
    "–ö–∞—Ä—Ç–æ–Ω": { title: "üì¶ –ö–∞—Ä—Ç–æ–Ω", text: "–ö–∞—Ä—Ç–æ–Ω “õ–∞–π—Ç–∞ ”©“£–¥–µ–ª–µ–¥—ñ! –°–∫–æ—Ç—á—Ç—ã –∞–ª—ã–ø, “õ–æ—Ä–∞–ø—Ç—ã —Ç–∞–ø—Å—ã—Ä–∞—Ä –∞–ª–¥—ã–Ω–¥–∞ –∂–∞–∑—ã–ø “õ–æ–π—ã“£—ã–∑." },
    "–°—Ç–µ–∫–ª–æ": { title: "üçæ –®—ã–Ω—ã", text: "“ö–∞“õ–ø–∞“õ—Ç–∞—Ä–¥—ã –∞–ª—ã–ø, –∂—É—ã–ø, —Ç“Ø—Å—Ç–µ—Ä—ñ–Ω–µ “õ–∞—Ä–∞–π ”©—Ç–∫—ñ–∑—ñ“£—ñ–∑." },
    "–ú–µ—Ç–∞–ª–ª": { title: "ü•´ –ú–µ—Ç–∞–ª–ª", text: "–ú–µ—Ç–∞–ª–ª –±–∞–Ω–∫—ñ–ª–µ—Ä –º–µ–Ω “õ–∞“õ–ø–∞“õ—Ç–∞—Ä “õ–∞–π—Ç–∞ ”©“£–¥–µ–ª–µ–¥—ñ. –û–ª–∞—Ä–¥—ã —Å—ã“ì—ã“£—ã–∑." },
    "–û—Ä–≥–∞–Ω–∏–∫–∞": { title: "üå± –û—Ä–≥–∞–Ω–∏–∫–∞", text: "–û—Ä–≥–∞–Ω–∏–∫–∞–ª—ã“õ “õ–∞–ª–¥—ã“õ—Ç–∞—Ä–¥—ã —Ç–æ–ø—ã—Ä–∞“õ“õ–∞ –∫–æ–º–ø–æ—Å—Ç –∂–∞—Å–∞—É“ì–∞ –±–æ–ª–∞–¥—ã." }
  };

  async function init() {
    const modelURL = URL + "model.json";
    const metadataURL = URL + "metadata.json";

    labelContainer = document.getElementById("label-container");
    labelContainer.innerHTML = "–ú–æ–¥–µ–ª—å –∂“Ø–∫—Ç–µ–ª—É–¥–µ...";
    model = await tmImage.load(modelURL, metadataURL);
    labelContainer.innerHTML = "–¢–∞–ª–¥–∞—É “Ø—à—ñ–Ω —Å—É—Ä–µ—Ç—Ç—ñ —Ç–∞“£–¥–∞“£—ã–∑";

    const imageUpload = document.getElementById("image-upload");
    imageElement = document.getElementById("uploaded-image");
    imageUpload.addEventListener("change", handleImage);
  }

  function handleImage(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        imageElement.src = e.target.result;
        imageElement.onload = async () => {
          labelContainer.innerHTML = "–¢–∞–ª–¥–∞—É –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä...";
          await predict();
        };
      };
      reader.readAsDataURL(file);
    }
  }

  async function predict() {
    const prediction = await model.predict(imageElement);
    prediction.sort((a,b)=>b.probability-a.probability);
    labelContainer.innerHTML = "";
    const best = prediction[0];
    const infoBlock = document.createElement("div"); infoBlock.className="waste-info";
    if(best.probability>=0.7 && wasteInfo[best.className]){
      infoBlock.innerHTML = `<h3>${wasteInfo[best.className].title}</h3><p>${wasteInfo[best.className].text}</p><p><strong>–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</strong> ${(best.probability*100).toFixed(1)}%</p><p>‚úÖ –ú–∞—Ç–µ—Ä–∏–∞–ª –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è ‚Äî —Å–¥–∞–π—Ç–µ –µ–≥–æ –≤ –±–ª–∏–∂–∞–π—à–∏–π –ø—É–Ω–∫—Ç.</p>`;
    } else if(best.probability>=0.4 && wasteInfo[best.className]){
      infoBlock.innerHTML = `<h3>${wasteInfo[best.className].title}</h3><p>${wasteInfo[best.className].text}</p><p><strong>–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</strong> ${(best.probability*100).toFixed(1)}%</p><p>‚ö†Ô∏è –ú–æ–¥–µ–ª—å –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–≤–µ—Ä–µ–Ω–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é.</p>`;
    } else {
      infoBlock.innerHTML = `<h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3><p>–ú–æ–¥–µ–ª—å –Ω–µ —Å–º–æ–≥–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ.</p>`;
    }
    labelContainer.appendChild(infoBlock);
  }

  init();
  </script>

  <script>
  document.getElementById("open-map").addEventListener("click", () => {
    window.open("https://2gis.kz/aktau/search/%D0%BF%D1%83%D0%BD%D0%BA%D1%82%D1%8B%20%D0%BF%D1%80%D0%B8%D0%B5%D0%BC%D0%B0%20%D0%B0%D0%BA%D1%82%D0%B0%D1%83?m=51.226992%2C43.658538%2F12.83", "_blank");
  });
  </script>

</body>
</html>
